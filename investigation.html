<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investiga√ß√£o - Criminal Minds Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .game-container {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            grid-template-rows: 80px 1fr;
            height: 100vh;
            gap: 1rem;
            padding: 1rem;
        }

        .header {
            grid-column: 1 / -1;
            background: rgba(15, 15, 35, 0.9);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            backdrop-filter: blur(10px);
        }

        .case-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer {
            font-size: 1.2rem;
            color: #ef4444;
            font-weight: 600;
        }

        .sidebar {
            background: rgba(15, 15, 35, 0.9);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .main-area {
            background: rgba(15, 15, 35, 0.9);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #fbbf24;
            border-bottom: 2px solid rgba(251, 191, 36, 0.3);
            padding-bottom: 0.5rem;
        }

        .evidence-card, .suspect-card, .location-card {
            background: rgba(22, 33, 62, 0.8);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .evidence-card:hover, .suspect-card:hover, .location-card:hover {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
            transform: translateY(-2px);
        }

        .card-title {
            font-weight: 600;
            color: #fbbf24;
            margin-bottom: 0.5rem;
        }

        .card-description {
            font-size: 0.9rem;
            color: #cbd5e1;
            line-height: 1.4;
        }

        .evidence-status {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        .status-new { background: #ef4444; color: white; }
        .status-analyzed { background: #f59e0b; color: white; }
        .status-connected { background: #10b981; color: white; }

        .suspect-photo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #374151, #6b7280);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            float: left;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
        }

        .chat-container {
            height: 200px;
            background: rgba(15, 15, 35, 0.5);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            overflow-y: auto;
        }

        .chat-message {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .chat-user {
            color: #fbbf24;
            font-weight: 600;
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
        }

        .chat-input input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 5px;
            background: rgba(15, 15, 35, 0.8);
            color: white;
        }

        .btn {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #0f0f23;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(251, 191, 36, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .investigation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .investigation-section {
            background: rgba(22, 33, 62, 0.6);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 10px;
            padding: 1.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(15, 15, 35, 0.8);
            border-radius: 4px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #fbbf24, #f59e0b);
            transition: width 0.3s ease;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid #fbbf24;
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #fbbf24;
        }

        /* BOT√ÉO SAIR MODERNO */
        .exit-button {
            background: rgba(15, 15, 35, 0.9);
            border: 2px solid rgba(156, 163, 175, 0.3);
            color: #9ca3af;
            padding: 0.6rem 1rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .exit-button:hover {
            border-color: #ef4444;
            color: #f87171;
            background: rgba(239, 68, 68, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);
        }

        .exit-icon {
            font-size: 1.2rem;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .exit-button:hover .exit-icon {
            transform: translateX(-3px);
        }

        .exit-button:active {
            transform: translateY(0) scale(0.95);
        }

        @media (max-width: 1024px) {
            .game-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr auto;
                height: auto;
                min-height: 100vh;
            }
            
            .sidebar {
                order: 2;
            }
            
            .main-area {
                order: 1;
            }
        }
    </style>
    <script src="firebase-config-injected.js"></script>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="exit-button" onclick="exitInvestigation()">
                    <span class="exit-icon">‚Üê</span>
                    <span>Sair</span>
                </button>
                <div class="case-title">üéØ CASO: O Serial Killer de Quantico</div>
            </div>
            <div class="timer" id="gameTimer">‚è±Ô∏è 45:00</div>
            <div style="display: flex; gap: 1rem;">
                <button class="btn" onclick="showNotes()">üìù Anota√ß√µes</button>
                <button class="btn btn-danger" onclick="makeAccusation()">‚öñÔ∏è Acusar</button>
            </div>
        </div>

        <div class="sidebar">
            <div class="section-title">üïµÔ∏è Equipe Online</div>
            <div class="team-list" id="teamList">
                <div class="chat-message">
                    <span class="chat-user">üëë Detetive Reid:</span> Online
                </div>
                <div class="chat-message">
                    <span class="chat-user">üîç Agente Morgan:</span> Online
                </div>
                <div class="chat-message">
                    <span class="chat-user">üìä Dra. Brennan:</span> Online
                </div>
            </div>

            <div class="section-title" style="margin-top: 2rem;">üí¨ Chat da Equipe</div>
            <div class="chat-container" id="chatContainer">
                <div class="chat-message">
                    <span class="chat-user">üëë Reid:</span> Encontrei algo interessante na cena do crime...
                </div>
                <div class="chat-message">
                    <span class="chat-user">üîç Morgan:</span> Vou interrogar o primeiro suspeito
                </div>
                <div class="chat-message">
                    <span class="chat-user">üìä Brennan:</span> Os dados n√£o batem, tem algo estranho
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
                <button class="btn" onclick="sendMessage()">Enviar</button>
            </div>
        </div>

        <div class="main-area">
            <div class="investigation-grid">
                <div class="investigation-section">
                    <div class="section-title">üîç Evid√™ncias (3/12)</div>
                    <div class="evidence-card" onclick="analyzeEvidence('dna')">
                        <div class="card-title">üß¨ Amostra de DNA</div>
                        <div class="card-description">DNA encontrado debaixo das unhas da v√≠tima. Pode revelar a identidade do assassino.</div>
                        <span class="evidence-status status-new">NOVA</span>
                    </div>
                    <div class="evidence-card" onclick="analyzeEvidence('fingerprint')">
                        <div class="card-title">üëÜ Impress√£o Digital</div>
                        <div class="card-description">Impress√£o parcial encontrada na arma do crime. Precisa de an√°lise comparativa.</div>
                        <span class="evidence-status status-analyzed">ANALISADA</span>
                    </div>
                    <div class="evidence-card" onclick="analyzeEvidence('phone')">
                        <div class="card-title">üì± Telefone da V√≠tima</div>
                        <div class="card-description">Mensagens suspeitas recebidas na noite do crime. √öltimo contato √†s 23:47.</div>
                        <span class="evidence-status status-connected">CONECTADA</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 25%"></div>
                    </div>
                </div>

                <div class="investigation-section">
                    <div class="section-title">üë• Suspeitos (2/5)</div>
                    <div class="suspect-card" onclick="interrogateSuspect('ex-husband')">
                        <div class="suspect-photo">üë®‚Äçüíº</div>
                        <div class="card-title">Marcus Thompson</div>
                        <div class="card-description">Ex-marido da v√≠tima. Hist√≥rico de viol√™ncia dom√©stica. √Ålibi question√°vel para a noite do crime.</div>
                    </div>
                    <div class="suspect-card" onclick="interrogateSuspect('neighbor')">
                        <div class="suspect-photo">üë©</div>
                        <div class="card-title">Sarah Wilson</div>
                        <div class="card-description">Vizinha pr√≥xima. Relatou ter ouvido gritos por volta das 23:30. Parece nervosa durante interrogat√≥rio.</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 40%"></div>
                    </div>
                </div>
            </div>

            <div class="investigation-grid">
                <div class="investigation-section">
                    <div class="section-title">üìç Locais de Interesse</div>
                    <div class="location-card" onclick="investigateLocation('crime-scene')">
                        <div class="card-title">üè† Cena do Crime</div>
                        <div class="card-description">Apartamento da v√≠tima. Sinais de luta. Porta for√ßada ou chave usada?</div>
                    </div>
                    <div class="location-card" onclick="investigateLocation('bar')">
                        <div class="card-title">üç∫ Last Call Bar</div>
                        <div class="card-description">√öltimo local onde a v√≠tima foi vista viva. C√¢meras de seguran√ßa dispon√≠veis.</div>
                    </div>
                </div>

                <div class="investigation-section">
                    <div class="section-title">üß† Perfil Psicol√≥gico</div>
                    <div style="font-size: 0.9rem; line-height: 1.6;">
                        <p><strong>Tipo:</strong> Assassino organizado</p>
                        <p><strong>Motiva√ß√£o:</strong> Pessoal/Vingan√ßa</p>
                        <p><strong>Idade:</strong> 25-45 anos</p>
                        <p><strong>Caracter√≠sticas:</strong> Conhece a v√≠tima, planejamento detalhado</p>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%"></div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn" onclick="requestBackup()">üöÅ Solicitar Refor√ßo</button>
                <button class="btn" onclick="consultDatabase()">üíæ Consultar Banco de Dados</button>
                <button class="btn" onclick="callExpert()">üî¨ Chamar Especialista</button>
                <button class="btn btn-danger" onclick="makeAccusation()">‚öñÔ∏è Fazer Acusa√ß√£o Final</button>
            </div>
        </div>

        <div class="sidebar">
            <div class="section-title">üìã Progresso da Investiga√ß√£o</div>
            <div style="margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Evid√™ncias Coletadas</span>
                    <span>3/12</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 25%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Suspeitos Interrogados</span>
                    <span>2/5</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%"></div>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Locais Investigados</span>
                    <span>2/4</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 50%"></div>
                </div>
            </div>

            <div class="section-title" style="margin-top: 2rem;">üèÜ Conquistas</div>
            <div style="font-size: 0.9rem;">
                <div style="margin-bottom: 0.5rem;">üîç Primeira Evid√™ncia ‚úÖ</div>
                <div style="margin-bottom: 0.5rem;">üë• Interrogat√≥rio Bem-sucedido ‚úÖ</div>
                <div style="margin-bottom: 0.5rem;">üß† Perfil Psicol√≥gico üîÑ</div>
                <div style="margin-bottom: 0.5rem;">‚öñÔ∏è Caso Resolvido ‚è≥</div>
            </div>

            <button class="btn" style="width: 100%; margin-top: 1rem;" onclick="showProgress()">
                üìä Relat√≥rio Detalhado
            </button>
        </div>
    </div>

    <!-- Modal para Interrogat√≥rio -->
    <div id="interrogationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('interrogationModal')">&times;</span>
            <h2 style="color: #fbbf24; margin-bottom: 1rem;">üîç Interrogat√≥rio</h2>
            <div id="interrogationContent"></div>
        </div>
    </div>

    <!-- Modal para An√°lise de Evid√™ncias -->
    <div id="evidenceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('evidenceModal')">&times;</span>
            <h2 style="color: #fbbf24; margin-bottom: 1rem;">üî¨ An√°lise de Evid√™ncia</h2>
            <div id="evidenceContent"></div>
        </div>
    </div>

    <!-- Modal para Acusa√ß√£o -->
    <div id="accusationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('accusationModal')">&times;</span>
            <h2 style="color: #fbbf24; margin-bottom: 1rem;">‚öñÔ∏è Fazer Acusa√ß√£o</h2>
            <div id="accusationContent">
                <p>Voc√™ tem certeza de que deseja fazer uma acusa√ß√£o? Esta a√ß√£o encerrar√° o jogo.</p>
                <div style="margin: 1.5rem 0;">
                    <label style="display: block; margin-bottom: 0.5rem;">Selecione o suspeito:</label>
                    <select style="width: 100%; padding: 0.5rem; background: rgba(15, 15, 35, 0.8); color: white; border: 1px solid #fbbf24; border-radius: 5px;">
                        <option>Marcus Thompson (Ex-marido)</option>
                        <option>Sarah Wilson (Vizinha)</option>
                        <option>James Carter (N√£o interrogado)</option>
                    </select>
                </div>
                <div style="margin: 1.5rem 0;">
                    <label style="display: block; margin-bottom: 0.5rem;">Justificativa da acusa√ß√£o:</label>
                    <textarea style="width: 100%; height: 100px; padding: 0.5rem; background: rgba(15, 15, 35, 0.8); color: white; border: 1px solid #fbbf24; border-radius: 5px;" placeholder="Descreva as evid√™ncias que levaram √† sua conclus√£o..."></textarea>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <button class="btn" onclick="closeModal('accusationModal')">Cancelar</button>
                    <button class="btn btn-danger" onclick="submitAccusation()">Confirmar Acusa√ß√£o</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Timer do jogo
        let gameTime = 45 * 60; // 45 minutos em segundos
        
        function startTimer() {
            const timer = setInterval(() => {
                const minutes = Math.floor(gameTime / 60);
                const seconds = gameTime % 60;
                document.getElementById('gameTimer').textContent = `‚è±Ô∏è ${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (gameTime <= 0) {
                    clearInterval(timer);
                    alert('‚è∞ Tempo esgotado! O caso ser√° encerrado automaticamente.');
                }
                gameTime--;
            }, 1000);
        }

        // Inicializar timer
        startTimer();

        // Sistema de chat
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (message) {
                const chatContainer = document.getElementById('chatContainer');
                const userName = localStorage.getItem('detectiveName') || 'Detetive';
                
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message';
                messageDiv.innerHTML = `<span class="chat-user">üïµÔ∏è ${userName}:</span> ${message}`;
                
                chatContainer.appendChild(messageDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                input.value = '';
                
                // Simular resposta da equipe
                setTimeout(() => {
                    const responses = [
                        "Boa observa√ß√£o! Vou investigar isso.",
                        "Interessante teoria, pode ser a chave do caso.",
                        "J√° verifiquei isso, mas vale a pena revisar.",
                        "Concordo, vamos focar nessa pista.",
                        "Excelente dedu√ß√£o! Isso faz sentido."
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    const responseDiv = document.createElement('div');
                    responseDiv.className = 'chat-message';
                    responseDiv.innerHTML = `<span class="chat-user">üîç Agente Morgan:</span> ${randomResponse}`;
                    chatContainer.appendChild(responseDiv);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 2000);
            }
        }

        // Enter para enviar mensagem
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // An√°lise de evid√™ncias
        function analyzeEvidence(type) {
            const evidenceModal = document.getElementById('evidenceModal');
            const content = document.getElementById('evidenceContent');
            
            const evidenceData = {
                'dna': {
                    title: 'üß¨ An√°lise de DNA',
                    content: `
                        <p><strong>Resultado da An√°lise:</strong></p>
                        <p>‚Ä¢ Perfil gen√©tico masculino identificado</p>
                        <p>‚Ä¢ N√£o h√° correspond√™ncia no banco de dados CODIS</p>
                        <p>‚Ä¢ DNA apresenta marcadores √∫nicos</p>
                        <p>‚Ä¢ <strong>Conclus√£o:</strong> Assassino n√£o tem antecedentes criminais</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="closeModal('evidenceModal')">Continuar Investiga√ß√£o</button>
                    `
                },
                'fingerprint': {
                    title: 'üëÜ An√°lise de Impress√£o Digital',
                    content: `
                        <p><strong>Resultado da An√°lise:</strong></p>
                        <p>‚Ä¢ Impress√£o parcial com 8 pontos de compara√ß√£o</p>
                        <p>‚Ä¢ Compat√≠vel com Marcus Thompson (Ex-marido)</p>
                        <p>‚Ä¢ Qualidade: 78% de confiabilidade</p>
                        <p>‚Ä¢ <strong>Conclus√£o:</strong> Evid√™ncia forte contra o suspeito</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="closeModal('evidenceModal')">Continuar Investiga√ß√£o</button>
                    `
                },
                'phone': {
                    title: 'üì± An√°lise do Telefone',
                    content: `
                        <p><strong>√öltimas Mensagens:</strong></p>
                        <p>‚Ä¢ 23:47 - "Precisamos conversar. √â urgente."</p>
                        <p>‚Ä¢ 23:49 - "Estou chegando. Deixa a porta aberta."</p>
                        <p>‚Ä¢ N√∫mero n√£o identificado: +55 11 9****-1234</p>
                        <p>‚Ä¢ <strong>Conclus√£o:</strong> V√≠tima esperava algu√©m</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="closeModal('evidenceModal')">Continuar Investiga√ß√£o</button>
                    `
                }
            };
            
            content.innerHTML = evidenceData[type].content;
            evidenceModal.style.display = 'block';
        }

        // Interrogat√≥rio de suspeitos
        function interrogateSuspect(suspect) {
            const modal = document.getElementById('interrogationModal');
            const content = document.getElementById('interrogationContent');
            
            const suspectData = {
                'ex-husband': {
                    name: 'Marcus Thompson',
                    content: `
                        <div class="suspect-photo" style="float: none; margin: 0 auto 1rem auto;">üë®‚Äçüíº</div>
                        <p><strong>Detetive:</strong> Onde voc√™ estava na noite do crime?</p>
                        <p><strong>Marcus:</strong> Eu... estava em casa. Assistindo TV.</p>
                        <p><strong>Detetive:</strong> Algu√©m pode confirmar isso?</p>
                        <p><strong>Marcus:</strong> N√£o, eu moro sozinho desde o div√≥rcio.</p>
                        <p><strong>Detetive:</strong> Suas impress√µes digitais foram encontradas na cena.</p>
                        <p><strong>Marcus:</strong> Isso √© imposs√≠vel! Eu n√£o estive l√° h√° meses!</p>
                        <p style="color: #ef4444; margin-top: 1rem;"><strong>An√°lise:</strong> Nervoso, contradi√ß√µes na vers√£o, suando excessivamente.</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="closeModal('interrogationModal')">Encerrar Interrogat√≥rio</button>
                    `
                },
                'neighbor': {
                    name: 'Sarah Wilson',
                    content: `
                        <div class="suspect-photo" style="float: none; margin: 0 auto 1rem auto;">üë©</div>
                        <p><strong>Detetive:</strong> O que voc√™ ouviu na noite do crime?</p>
                        <p><strong>Sarah:</strong> Gritos... por volta das 23:30. Foi terr√≠vel.</p>
                        <p><strong>Detetive:</strong> Por que n√£o chamou a pol√≠cia imediatamente?</p>
                        <p><strong>Sarah:</strong> Eu pensei que eram s√≥ brigas de casal, sabe?</p>
                        <p><strong>Detetive:</strong> Voc√™ viu algu√©m entrando ou saindo?</p>
                        <p><strong>Sarah:</strong> Havia um carro escuro parado na rua...</p>
                        <p style="color: #10b981; margin-top: 1rem;"><strong>An√°lise:</strong> Colaborativa, detalhes consistentes, parece honesta.</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="closeModal('interrogationModal')">Encerrar Interrogat√≥rio</button>
                    `
                }
            };
            
            content.innerHTML = suspectData[suspect].content;
            modal.style.display = 'block';
        }

        // Investigar locais
        function investigateLocation(location) {
            alert(`üîç Investigando ${location}... Novas pistas encontradas!`);
        }

        // Fun√ß√µes dos bot√µes de a√ß√£o
        function requestBackup() {
            alert('üöÅ Refor√ßo solicitado! Unidade especial chegar√° em 10 minutos.');
        }

        function consultDatabase() {
            alert('üíæ Consultando banco de dados... Nenhuma correspond√™ncia encontrada para o perfil atual.');
        }

        function callExpert() {
            alert('üî¨ Especialista em an√°lise forense contactado. Relat√≥rio detalhado em processamento.');
        }

        function makeAccusation() {
            document.getElementById('accusationModal').style.display = 'block';
        }

        function submitAccusation() {
            alert('‚öñÔ∏è Acusa√ß√£o registrada! O caso ser√° analisado pelo promotor. Parab√©ns, detetive!');
            closeModal('accusationModal');
        }

        function showNotes() {
            alert('üìù Sistema de anota√ß√µes em desenvolvimento. Use o chat para comunicar observa√ß√µes √† equipe.');
        }

        // Fun√ß√£o para sair da investiga√ß√£o
        function exitInvestigation() {
            // Mostrar modal de confirma√ß√£o
            const confirmExit = confirm('üö™ Tem certeza que deseja sair da investiga√ß√£o?\n\n‚ö†Ô∏è Seu progresso atual ser√° salvo.\n\n‚úÖ Clique OK para voltar ao lobby\n‚ùå Clique Cancelar para continuar jogando');
            
            if (confirmExit) {
                // Salvar progresso antes de sair
                const gameData = {
                    evidencesCollected: 3,
                    suspectsInterrogated: 2,
                    locationsInvestigated: 2,
                    exitTime: new Date().toISOString(),
                    timeRemaining: gameTime
                };
                
                localStorage.setItem('criminalMinds_classicProgress', JSON.stringify(gameData));
                
                // Mostrar feedback de sa√≠da
                const exitFeedback = document.createElement('div');
                exitFeedback.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #1a1a2e, #16213e);
                    border: 3px solid #fbbf24;
                    border-radius: 20px;
                    padding: 2rem;
                    z-index: 4000;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
                    color: white;
                `;
                
                exitFeedback.innerHTML = `
                    <h3 style="color: #fbbf24; margin-bottom: 1rem;">üö™ Saindo da Investiga√ß√£o...</h3>
                    <p style="color: #cbd5e1; margin-bottom: 1rem;">‚úÖ Progresso salvo com sucesso!</p>
                    <p style="color: #6b7280; font-style: italic;">Redirecionando para o lobby...</p>
                `;
                
                document.body.appendChild(exitFeedback);
                
                // Redirecionar ap√≥s 2 segundos
                setTimeout(() => {
                    window.location.href = 'lobby.html';
                }, 2000);
            }
        }

        function showProgress() {
            alert('üìä Progresso atual: 45% do caso resolvido. Continue coletando evid√™ncias!');
        }

        // Fechar modais
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Fechar modal clicando fora
        window.onclick = function(event) {
            const modals = ['interrogationModal', 'evidenceModal', 'accusationModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // Simula√ß√£o de outros detetives online
        function simulateTeamActivity() {
            const activities = [
                "üîç Morgan encontrou uma nova evid√™ncia!",
                "üìä Brennan atualizou o perfil psicol√≥gico",
                "üöÅ Garcia encontrou informa√ß√µes no banco de dados",
                "‚öñÔ∏è Hotchner aprovou a busca e apreens√£o",
                "üî¨ Reid analisou a trajet√≥ria bal√≠stica"
            ];
            
            setInterval(() => {
                if (Math.random() < 0.3) { // 30% de chance a cada 10 segundos
                    const activity = activities[Math.floor(Math.random() * activities.length)];
                    const chatContainer = document.getElementById('chatContainer');
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'chat-message';
                    messageDiv.innerHTML = `<span style="color: #10b981;">ü§ñ Sistema:</span> ${activity}`;
                    chatContainer.appendChild(messageDiv);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }, 10000);
        }

        // Inicializar simula√ß√µes
        simulateTeamActivity();

        // Recuperar dados do usu√°rio
        window.onload = function() {
            const detectiveName = localStorage.getItem('detectiveName');
            if (detectiveName) {
                const teamList = document.getElementById('teamList');
                const userDiv = document.createElement('div');
                userDiv.className = 'chat-message';
                userDiv.innerHTML = `<span class="chat-user">üïµÔ∏è ${detectiveName}:</span> Online`;
                teamList.appendChild(userDiv);
            }
        };
    </script>
</body>
</html>